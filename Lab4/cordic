set 0x1
ld r2
set 0x2
ld r3
set 0x3
ld r4
set 0x4
ld r5
set 0
mv r6
mv r7
set 0 //set loop counter to 0
mv r1 //LOOP:
set 0
mv r15
add r4
bl LT_0
set 0
add r5
bl LT_0 //GTE_0:
set 1
mv r15
set 0
add r1
bl END_SHIFT_Y
set 0
mv r15
SHIFT_Y:
mv r15
set 0
add r4
mv r10
set 0
add r5
mv r11
sra r10
sro r11
set 1
add r15
mv r14
set 0
add r1
mv r15
set 0
add r14
bl SHIFT_Y
END_SHIFT_Y:
set 0
sra r0
add r3
add r11
mv r9
set 0
add r2
add r10
mv r8
set 1
sra r0
set 0
not r3
add r3
set 0
not r2
add r2
set 1
mv r15
set 0
add r1
bl END_SHIFT_X
set 0
mv r15
SHIFT_X:
mv r15
sra r2
sro r3
set 1
add r15
mv r14
set 0
add r1
mv r15
set 0
add r14
bl SHIFT_X
END_SHIFT_X:
set 0
sra r0
add r3
add r5
mv r11
set 0
add r4
add r2
mv r10
set 0
add r1
mv r15
set 10
bl END_SHIFT1
set 1
mv r3 //use r3 and r2 for 1 << (11-i)
mv r4 //use r4 for shift counter starting at 1
set 0
mv r2
SHIFT_1:
slg r3
slo r2
set 11
sub r1
mv r15
set 1
add r4
mv r4
bl SHIFT_1
END_SHIFT1:
set 0
add r3
add r13
mv r7
set 0
add r2
add r12
mv r6
br SET_NEW
LT_0:
set 1
sra r0
set 0
not r5
add r5
set 0
not r4
add r4
set 0
mv r15
SHIFT_Y:
mv r15
set 0
add r4
mv r10
set 0
add r5
mv r11
sra r10
sro r11
set 1
add r15
mv r14
set 0
add r1
mv r15
set 0
add r14
bl SHIFT_Y
set 0
sra r0
add r3
add r11
mv r9
set 0
add r2
add r10
mv r8
set 0
mv r15
SHIFT_X:
mv r15
sra r2
sro r3
set 1
add r15
mv r14
set 0
add r1
mv r15
set 0
add r14
bl SHIFT_X
set 0
sra r0
add r3
add r5
mv r11
set 0
add r4
add r2
mv r10
set 0
add r1
mv r15
set 10
bl END_SHIFT1
set 1
mv r3 //use r3 and r2 for 1 << (11-i)
mv r4 //use r4 for shift counter starting at 1
set 0
mv r2
SHIFT_1:
slg r3
slo r2
set 11
sub r1
mv r15
set 1
add r4
mv r4
bl SHIFT_1
END_SHIFT1:
set 0
add r13
sub r13
mv r7
set 0
add r12
sub r2
mv r6
SET_NEW:
set 0
add r9
mv r3
set 0
add r8
mv r2
set 0
add r11
mv r5
set 0
add r10
mv r4
set 0
add r13
mv r7
set 0
add r12
mv r6
set 12
mv r15
set 0
add r1
bl LOOP
set 5
st r2
set 6
st r3
set 7
st r6
set 8
st r7
